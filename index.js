var E=Object.defineProperty;var S=(e,t)=>()=>(e&&(t=e(e=0)),t);var F=(e,t)=>{for(var r in t)E(e,r,{get:t[r],enumerable:!0})};var M,g,R=S(()=>{M=e=>e,g=M});var x={};F(x,{default:()=>j});var j,y=S(()=>{R();j=g(({app:e,resolve:t,render:r,serve:o})=>{e.get(t.urlPath("*"),(i,a)=>{a.setHeader("Content-Type","text/html"),r({req:i,res:a}).then(n=>{a.send(n)}).catch(n=>{n.url?n.code?a.redirect(n.code,n.url):a.redirect(n.url):n.code===404?a.status(404).send("404 | Page Not Found"):a.status(500).send("500 | Internal Server Error")})})})});import{join as c,basename as D,isAbsolute as L}from"node:path";import{readFileSync as O}from"node:fs";import{fileURLToPath as U}from"node:url";import{renderToString as G}from"vue/server-renderer";import N from"./render-template.js";import _ from"./server/server-entry.js";var v=()=>{},f=()=>{},w=()=>{};async function P({app:e,port:t,isReady:r,ssrHandler:o}){return{handler:o}}function u(e){return Promise.all([Promise.resolve().then(()=>(y(),x))]).then(async t=>{let r=t.map(o=>o.default);for(let o=0;o<r.length;o++)try{await r[o](e)}catch(i){console.error("[Quasar SSR] middleware error:",i);return}})}var k=process.env.PORT||3e3,q=/\/\//g,d="/",B=d==="/"?e=>e||"/":e=>e?(d+e).replace(q,"/"):d,l=U(new URL(".",import.meta.url)),T=c(l,"client"),m=JSON.parse(O(c(l,"./quasar.manifest.json"),"utf-8"));function H(){let e=c(...arguments);return L(e)===!0?e:c(T,e)}function I(e,t){let r="",o=new Set;return e.forEach(i=>{let a=m[i];a!==void 0&&a.forEach(n=>{if(o.has(n)===!0)return;o.add(n);let h=D(n);if(m[h]!==void 0)for(let p of m[h])o.has(p)===!1&&(r+=f(p,t),o.add(p));r+=f(n,t)})}),r}async function V(e){let t=[];Object.assign(e,{_meta:{},onRendered:r=>{t.push(r)}});try{let r=await _(e),o=await G(r,e);return t.forEach(i=>{i()}),typeof e.rendered=="function"&&e.rendered(),e._meta.runtimePageContent=o,e._meta.endingHeadTags+=I(e.modules,{ssrContext:e}),N(e)}catch(r){throw r}}var s={port:k,resolve:{urlPath:B,root(){return c(l,...arguments)},public:H},publicPath:d,folders:{root:l,public:T},render:V},A=await v(s);s.app=A;var b=await w(s);s.serve={static:b};await b({urlPath:"/",pathToServe:"."});await u(s);var J=await P(s),ne=J?.handler;export{A as app,ne as handler,J as listenResult};
